<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laporan PB KJL ZON 3</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@keyframes blink {
  0%,50%,100%{opacity:1}
  25%,75%{opacity:0}
}
.blink-red{animation:blink 4s infinite}
</style>
</head>

<body class="h-screen overflow-hidden relative text-sm">

<!-- Background -->
<div class="absolute inset-0 bg-gradient-to-br from-black via-gray-900 to-gray-800"></div>

<div class="relative max-w-3xl mx-auto p-4 space-y-3">

<!-- Banner -->
<nav class="h-24 rounded-xl shadow-lg border border-white/30 bg-cover bg-center"
style="background-image:url('DSC_0085_1.jpg')"></nav>

<!-- Header -->
<div class="text-center text-white space-y-1">
<h2 class="text-2xl font-bold">ğŸ¤£ by PPB NAZMI ğŸ‘®ğŸ¿â€â™‚ï¸</h2>
<p class="text-xs italic blink-red">
â†’ Pilih stesen â†’ pilih anggota â†’ Copy & WhatsApp
</p>
</div>

<!-- Glass Container -->
<div class="bg-white/70 backdrop-blur-md rounded-xl p-4 space-y-3 shadow-xl">

<!-- Stesen -->
<div class="bg-white rounded-lg p-2 shadow">
<label class="font-semibold">Stesen hari ini</label>
<select id="stesenSelect" class="w-full p-1.5 rounded border text-sm"></select>
</div>

<!-- Anggota Bertugas -->
<div class="bg-white rounded-lg p-2 shadow space-y-1">
<label class="font-semibold">Anggota Bertugas</label>

<select class="anggota w-full p-1.5 rounded border"></select>
<select class="anggota w-full p-1.5 rounded border"></select>
<select class="anggota w-full p-1.5 rounded border"></select>
<select class="anggota w-full p-1.5 rounded border"></select>
</div>

<!-- Tambah stesen -->
<div class="flex gap-2">
<input id="newStesen" placeholder="Tambah stesen"
class="flex-1 p-1.5 rounded border text-sm">
<button id="addStesen"
class="px-3 bg-blue-600 text-white rounded shadow">
Tambah
</button>
</div>

<!-- Action -->
<button id="sendReport"
class="w-full py-2 rounded-lg bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold shadow">
Copy & Buka WhatsApp
</button>

</div>
</div>

<script>
// DATA
const defaultStesen=[
"ABDULLAH HUKUM","KERINCHI","UNIVERSITI","TAMAN JAYA",
"ASIA JAYA","TAMAN PARAMOUNT","TAMAN BAHAGIA","KELANA JAYA"
];

const anggotaList=[
"PB NAZMI","PPB AHMAD TARMIZI","PB MUHAMMAD ALIF",
"PB SAINOL ARIFFIN","PPB ILLIYAS","PB ADEHA","PPB AFIFAH",
"PB ZUHAIRAH","PB NUR SYAFIKAH NADIA","PB SOLEH",
"PB HAZIQ","PB NUR SYAHIRA","PB SYASYA"
];

// ELEMENT
const stesenSelect=document.getElementById("stesenSelect");
const anggotaSelects=document.querySelectorAll(".anggota");

// LOAD
let stesenList=JSON.parse(localStorage.getItem("stesenList"))||defaultStesen;
let lastAnggota=JSON.parse(localStorage.getItem("anggotaAkhir"))||[];

// INIT
function load(){
stesenSelect.innerHTML="";
stesenList.forEach(s=>{
stesenSelect.innerHTML+=`<option>${s}</option>`;
});

anggotaSelects.forEach((sel,i)=>{
sel.innerHTML="<option value=''>-</option>";
anggotaList.forEach(a=>{
sel.innerHTML+=`<option>${a}</option>`;
});
if(lastAnggota[i]) sel.value=lastAnggota[i];
});
}
load();

// TAMBAH STESEN
addStesen.onclick=()=>{
const v=newStesen.value.trim();
if(v && !stesenList.includes(v)){
stesenList.push(v);
localStorage.setItem("stesenList",JSON.stringify(stesenList));
load(); newStesen.value="";
}
};

// GENERATE
function generateText(){
const d=new Date();
const tarikh=d.toLocaleDateString("ms-MY");
const masa=d.toTimeString().slice(0,5).replace(":","")+" HRS";
const stesen=stesenSelect.value;

const anggotaDipilih=[...anggotaSelects]
.map(a=>a.value).filter(Boolean);

localStorage.setItem("anggotaAkhir",JSON.stringify(anggotaDipilih));

let senarai=anggotaDipilih.map((a,i)=>`${i+1}. ${a}`).join("\n");

return `*Assalamualaikum wbt & Salam Sejahtera YDH Datuk/Tuan/Puan,*

Laporan penugasan anggota bertugas Aliran Kelana Jaya Jabatan Sekuriti.

TARIKH : ${tarikh}
MASA : ${masa}
TUGASAN : KAWALAN DAN PEMANTAUAN DI PLATFORM 1,2
LOKASI : STESEN ${stesen} (KJL)

Anggota Bertugas:
${senarai}

*#TERUSKAN PERKARA BAIK*`;
}

// SEND
sendReport.onclick=()=>{
const t=generateText();
navigator.clipboard.writeText(t).then(()=>{
window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(t),"_blank");
});
};
</script>
</body>
</html>